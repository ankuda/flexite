config = new function () {
    var self = this,
        paths = {
            children: decodeURIComponent("<%= entries_configs_path('?') %>")
        };

    this.appendChildren = function (id, node) {
        event.stopPropagation();
        $flexite.get(getRoute("children", [id]), null, function (html) {
            if (!/\S/.test(html)) return false;

            $flexite(node).append(html)
            $flexite(node).attr("onclick", `config.removeChildren(${id}, this);`)
        });
    };

    this.removeChildren = function(id, node) {
        event.stopPropagation();
        $flexite(node).children().remove();
        $flexite(node).attr("onclick", `config.appendChildren(${id}, this);`);
    };

    this.editEntry = function(id, node) {
        event.stopPropagation();

    }

    function getRoute(name, params) {
        var path = paths[name];

        params.forEach(function (param) {
            path = path.replace('?', param)
        });

        return path;
    }
};
